<!DOCTYPE html>
<html lang="en">
  <!-- default header -->

  <head th:replace="/fragments/header.html :: header(${pageTitle})"> </head>

  <!-- more attribute -->
  <head>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" th:href="@{/css/style.css}" />
  </head>

  <body>
    <!--nav-->
    <section th:replace="/fragments/navbar.html :: navbar()"></section>

    <!-- Table for admin -->
    <div th:if="${isAdmin}" class="container">
      <!-- table result -->
      <div class="container-fluid text-center">
        <div th:if="${message}" class="alert alert-success text-center">[[${message}]]</div>

        <div>
          <table class="table table-bordered table-hover">
            <thead class="thead-dark">
              <tr>
                <th class="col" th:replace="fragments/sorting :: sorting('id','Id')"></th>
                <th class="col" th:replace="fragments/sorting :: sorting('image','Image')"></th>
                <th class="col" th:replace="fragments/sorting :: sorting('category','Category')"></th>
                <th class="col" th:replace="fragments/sorting :: sorting('name','Name')"></th>
                <th class="col" th:replace="fragments/sorting :: sorting('price','Price')"></th>
                <th class="col">Handler</th>
              </tr>
            </thead>
            <tbody>
              <th:block th:each="product, idx : ${paginatedProductResponse?.products}">
                <tr th:classappend="${idx.index % 2 == 0} ? 'table-active' : 'table-light'">
                  <td class="align-middle vertical-center">
                    <a th:href="@{/products/} + ${product.id}"> [[${product.id}]] </a>
                  </td>
                  <td>
                    <img
                      style="object-fit: cover"
                      width="100"
                      height="100"
                      th:src="${product.thumbnail.get(0) != null ? product.thumbnail.get(0) : 'https://placehold.co/100x100/png'}"
                      alt=""
                    />
                  </td>
                  <td class="align-middle vertical-center text-truncate">[[${product.category?.name}]]</td>
                  <td class="align-middle vertical-center text-truncate">[[${product.name}]]</td>
                  <td class="align-middle vertical-center text-truncate">[[${product.price}]]</td>
                  <td class="align-middle">
                    <a class="h4 p-1" th:href="@{'/products/edit/' + ${product.id}}">
                      <i class="fa-solid fa-pen-to-square"></i>
                    </a>

                    <a class="h4 p-1" th:href="@{'/products/delete/' + ${product.id}}">
                      <i class="fa-solid fa-trash"></i>
                    </a>

                    <a class="h4 p-1" th:href="@{'/products/' + ${product.id}}">
                      <i class="fa-solid fa-eye"></i>
                    </a>
                  </td>
                </tr>
              </th:block>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!--footer-->
    <footer th:replace="/fragments/footer.html :: footer()"></footer>
  </body>
</html>
